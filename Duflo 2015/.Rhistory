"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
View(Duflo)
head(Duflo)
correspondencia <- data.frame(
Edad = c(17, 18, 19, 20, 21, 22, 23, 24),
Año_de_Nacimiento = c(1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985)
)
# Reemplazar el año de nacimiento con el correspondiente a la edad
Duflo$Q_a3_8_date_of_birth <- correspondencia$Año_de_Nacimiento[match(Duflo$Q_b1_10, correspondencia$Edad)]
# Mostrar las primeras filas del dataframe actualizado
head(Duflo)
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
View(studysample_allmerged)
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
View(Duflo)
head(Duflo)
correspondencia <- data.frame(
Edad = c(17, 18, 19, 20, 21, 22, 23, 24),
Año_de_Nacimiento = c(1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985)
)
# Reemplazar el año de nacimiento con el correspondiente a la edad
Duflo$Q_a3_8_date_of_birth <- correspondencia$Año_de_Nacimiento[match(Duflo$Q_a3_8_date_of_birth, correspondencia$Edad)]
# Mostrar las primeras filas del dataframe actualizado
head(Duflo)
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
correspondencia <- data.frame(
Edad = c(17, 18, 19, 20, 21, 22, 23, 24),
Año_de_Nacimiento = c(1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985)
)
# Reemplazar el año de nacimiento con el correspondiente a la edad
Duflo$Q_a3_8_date_of_birth <- correspondencia$Edad[match(Duflo$Q_a3_8_date_of_birth, correspondencia$Año_de_Nacimiento)]
# Mostrar las primeras filas del dataframe actualizado
head(Duflo)
# Definir los límites de los rangos de edad
rangos_edad <- c(0, 18, 20, Inf)
# Definir las etiquetas de las categorías
categorias <- c("<=18", "19<= a <=20", ">=21")
# Crear una nueva columna con las categorías de edad
Duflo$Edad_Categoria <- cut(Duflo$Q_a3_8_date_of_birth, breaks = rangos_edad, labels = categorias, right = FALSE)
# Mostrar las primeras filas del dataframe actualizado
head(Duflo)
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
correspondencia <- data.frame(
Edad = c(17, 18, 19, 20, 21, 22, 23, 24),
Año_de_Nacimiento = c(1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985)
)
# Reemplazar el año de nacimiento con el correspondiente a la edad
Duflo$Q_a3_8_date_of_birth <- correspondencia$Edad[match(Duflo$Q_a3_8_date_of_birth, correspondencia$Año_de_Nacimiento)]
# Mostrar las primeras filas del dataframe actualizado
head(Duflo)
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
correspondencia <- data.frame(
Edad = c(17, 18, 19, 20, 21, 22, 23, 24),
Año_de_Nacimiento = c(1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985)
)
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
for (i in 1:nrow(Duflo)){
if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
for (i in 1:nrow(Duflo)){
if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
for (i in 1:nrow(Duflo)){
if (Duflo$Q_a3_8_date_of_birth[i] is NULL){
for (i in 1:nrow(Duflo)){
if (Duflo$Q_a3_8_date_of_birth[i] is.NULL){
for (i in 1:nrow(Duflo)){
if (is.na(Duflo$Q_a3_8_date_of_birth[i])) {
Duflo$Q_a3_8_date_of_birth[i] <- NA
}
if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
for (i in 1:nrow(Duflo)){
if (is.na(Duflo$Q_a3_8_date_of_birth[i])) {
Duflo$Q_a3_8_date_of_birth[i] <- NA
}
else if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
else if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
for (i in 1:nrow(Duflo)){
if (is.na(Duflo$Q_a3_8_date_of_birth[i])) {
Duflo$Q_a3_8_date_of_birth[i] <- NA
}
else if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
else if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
view(Duflo)
View(Duflo)
names(Duflo)[names(Duflo) == "Q_a3_8_date_of_birth"] <- "Age"
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
for (i in 1:nrow(Duflo)){
if (is.na(Duflo$Q_a3_8_date_of_birth[i])) {
Duflo$Q_a3_8_date_of_birth[i] <- NA
}
else if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
else if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
View(Duflo)
names(Duflo)[names(Duflo) == "Q_a3_8_date_of_birth"] <- "age"
for (i in 1:nrow(Duflo)){
if(is.na(Duflo$Q_b1_12_edu_level[i])){
Duflo$Q_b1_12_edu_level <- NA
}
else if(Duflo$Q_b1_12_edu_level[i] == ""){
Duflo$Q_b1_12_edu_level[i] <- "None or primary"
}
else if(Duflo$Q_b1_12_edu_level[i] == "F1" || Duflo$Q_b1_12_edu_level[i] == "F2" || Duflo$Q_b1_12_edu_level[i] == 6){
Duflo$Q_b1_12_edu_level[i] <- "F1-F2"
}
else if(Duflo$Q_b1_12_edu_level[i] == 7 || Duflo$Q_b1_12_edu_level[i] == "F3" || Duflo$Q_b1_12_edu_level[i] == "F4" || Duflo$Q_b1_12_edu_level[i] == 8){
Duflo$Q_b1_12_edu_level[i] <- "F3-F4"
}
else{
Duflo$Q_b1_12_edu_level[i] <- "F5 or higher"
}
}
names(Duflo)[names(Duflo) == "Duflo$Q_b1_12_edu_level"] <- "level of education"
CowanDuflo <- Duflo[, c("sex", "age", "level of education")]
View(CowanDuflo)
names(Duflo)[names(Duflo) == "Duflo$Q_b1_12_edu_level"] <- "level of education"
CowanDuflo <- Duflo[, c("sex", "age", "level of education")]
CowanDuflo <- Duflo[, c("sex", "age", "level of education")]
names(Duflo)[names(Duflo) == "Q_b1_12_edu_level"] <- "level of education"
CowanDuflo <- Duflo[, c("sex", "age", "level of education")]
View(CowanDuflo)
for(i in 1:nrow(Duflo)){
if(is.na(Duflo$Q_b4_114_marital_status[i])){
Duflo$Q_b4_114_marital_status[i] <- NA
}
else if(Duflo$Q_b4_114_marital_status[i] != 4){
Duflo$Q_b4_114_marital_status[i] <- 1
}
else{
Duflo$Q_b4_114_marital_status[i] <- 0
}
}
names(Duflo)[names(Duflo) == "Q_b4_114_marital_status"] <- "Ever married"
CowanDuflo <- Duflo[, c("sex", "age", "level of education", "Ever married")]
library(haven)
studysample_allmerged <- read_dta("D:/David/Documents/Universidad/Proyecto II/Duflo 2015/studysample_allmerged.dta")
Duflo <- studysample_allmerged[, c("schoolid", "pupilid", "sex", "Utreat",
"HIVtreat", "Q_a3_8_date_of_birth", "Q_b1_10", "Q_b1_12_edu_level",
"Q_b2_48_agreement", "Q_b2_49_agreement","Q_b2_50_agreement",
"Q_b2_51_agreement","Q_b2_52_agreement", "Q_b2_53_agreement",
"Q_b2_61_decision_kids", "Q_b2_68_edu_comparison", "Q_b3_78",
"Q_b3_79_prevent_hiv", "Q_b3_80_how_prevent_hiv", "Q_b3_81",
"Q_b3_83", "Q_b3_84","Q_b3_88", "Q_b3_94","Q_b3_102_get_condoms",
"Q_b3_104_agree_with_statement", "Q_b3_105_agree_with_statement",
"Q_b3_106_agree_with_statement", "Q_b3_107_agree_with_statement",
"Q_b3_108_agree_with_statement", "Q_b4_114_marital_status",
"Q_b4_117_had_sex", "Q_b4_118_sex_one_person", "Q_b4_119_age_1st_sex",
"Q_b4_120_6months", "Q_b4_121_sex_patner", "Q_b4_123_use_condom",
"Q_b4_126_used_condom", "Q_b4_127_last_sex_use_condom", "Q_b4_130",
"Q_b4_132_who_decides", "Q_b5_135_change_behavior", "Q_b5_136",
"Q_b6_139_given_birth","Q_b6_161_pregnant","Q_b6_163_wanted_pregnancy",
"Q_b6_164", "Q_b6_165","Q_b6_202_sti","Q_b6_203_discharge", "Q_b6_204",
"Q_b6_206_seek_treatment", "Q_b6_208_inform_patner", "Q_b6_209_stop_sex",
"Q_b6_210_use_condom", "hiv_positive", "hsv2_positive")]
head(Duflo)
for (i in 1:nrow(Duflo)) {
Duflo$Q_a3_8_date_of_birth[i] = Duflo$Q_a3_8_date_of_birth[i] - 1992 + 17
}
for (i in 1:nrow(Duflo)){
if (is.na(Duflo$Q_a3_8_date_of_birth[i])) {
Duflo$Q_a3_8_date_of_birth[i] <- NA
}
else if (Duflo$Q_a3_8_date_of_birth[i] <= 18){
Duflo$Q_a3_8_date_of_birth[i] <- "18"
}
else if (19 <= Duflo$Q_a3_8_date_of_birth[i] & Duflo$Q_a3_8_date_of_birth[i] <= 20){
Duflo$Q_a3_8_date_of_birth[i] <- "19-20"
}
else{
Duflo$Q_a3_8_date_of_birth[i] <- "21-22"
}
}
View(Duflo)
names(Duflo)[names(Duflo) == "Q_a3_8_date_of_birth"] <- "age"
for (i in 1:nrow(Duflo)){
if(is.na(Duflo$Q_b1_12_edu_level[i])){
Duflo$Q_b1_12_edu_level <- NA
}
else if(Duflo$Q_b1_12_edu_level[i] == ""){
Duflo$Q_b1_12_edu_level[i] <- "None or primary"
}
else if(Duflo$Q_b1_12_edu_level[i] == "F1" || Duflo$Q_b1_12_edu_level[i] == "F2" || Duflo$Q_b1_12_edu_level[i] == 6){
Duflo$Q_b1_12_edu_level[i] <- "F1-F2"
}
else if(Duflo$Q_b1_12_edu_level[i] == 7 || Duflo$Q_b1_12_edu_level[i] == "F3" || Duflo$Q_b1_12_edu_level[i] == "F4" || Duflo$Q_b1_12_edu_level[i] == 8){
Duflo$Q_b1_12_edu_level[i] <- "F3-F4"
}
else{
Duflo$Q_b1_12_edu_level[i] <- "F5 or higher"
}
}
names(Duflo)[names(Duflo) == "Q_b1_12_edu_level"] <- "level of education"
CowanDuflo <- Duflo[, c("sex", "age", "level of education")]
View(CowanDuflo)
for(i in 1:nrow(Duflo)){
if(is.na(Duflo$Q_b4_114_marital_status[i])){
Duflo$Q_b4_114_marital_status[i] <- NA
}
else if(Duflo$Q_b4_114_marital_status[i] != 4){
Duflo$Q_b4_114_marital_status[i] <- 1
}
else{
Duflo$Q_b4_114_marital_status[i] <- 0
}
}
names(Duflo)[names(Duflo) == "Q_b4_114_marital_status"] <- "ever married"
CowanDuflo <- Duflo[, c("sex", "age", "level of education", "ever married")]
valores_separados <- strsplit(as.character(Duflo$Q_b3_78), ", ")
# Crear una columna nueva inicializada con 0
Duflo$"HIV acquisition" <- 1
# Definir las condiciones y asignar 1 si se cumplen
for (i in 1:length(valores_separados)) {
if (any(as.numeric(valores_separados[[i]]) %in% c(NA, 12, 14, 15, 16, 17, 18))) {
Duflo$ColumnaNueva[i] <- 0
}
}
# Definir las condiciones y asignar 1 si se cumplen
for (i in 1:length(valores_separados)) {
if (any(as.numeric(valores_separados[[i]]) %in% c(NA, 12, 14, 15, 16, 17, 18))) {
Duflo$"HIV acquisition"[i] <- 0
}
}
warnings()
# Crear una columna nueva inicializada con 0
Duflo$"HIV acquisition" <- 1
# Crear una columna nueva inicializada con 0
Duflo$"HIV acquisition" <- 1
# Definir las condiciones y asignar 1 si se cumplen
for (i in 1:length(valores_separados)) {
if (any(as.numeric(valores_separados[[i]]) %in% c(12, 14, 15, 16, 17, 18))) {
Duflo$"HIV acquisition"[i] <- 0
}
}
# Crear una columna nueva inicializada con 0
Duflo$"HIV acquisition" <- 1
View(Duflo$"HIV acquisition")
# Crear una columna nueva inicializada con 0
Duflo$"HIV acquisition" <- 1
# Definir las condiciones y asignar 1 si se cumplen
for (i in 1:length(valores_separados)) {
if (any(as.numeric(valores_separados[[i]]) %in% c(12, 14, 15, 16, 17, 18))) {
Duflo$"HIV acquisition"[i] <- 0
}
}
View(Duflo$"HIV acquisition")
Duflo_sin_NA_HIV <- Duflo[!is.na(Duflo$hiv_positive),
View(Duflo_sin_NA_HIV)
Duflo_sin_NA_HIV <- Duflo[!is.na(Duflo$hiv_positive), ]
View(Duflo_sin_NA_HIV)
Duflo_sin_NA_HIV <- Duflo[!is.na(Duflo$hiv_positive), ]
View(Duflo_sin_NA_HIV)
